<!-- generated by @neynar/create-farcaster-mini-app version 1.3.2 -->

# BasetiveDiwaliBonus - Web3 Festival Experience

**BasetiveDiwaliBonus** is a decentralized mini-app on Base Network that rewards users for sharing bright, Diwali-themed photos. Built with Next.js, Tailwind CSS, and smart contracts, it combines AI-powered photo scoring with community voting to create a festive Web3 experience.
---

## contract address
1. DiwaliTocken: 0xDB480bc7Dcb47c1e6D309cED5FD6dB59174F1D2E
2. DiwaliLights: 0xAFC370bc1fb35c2EEfbEe5250A7fa2AF2541c69c

---
## Features

- **Camera Integration**: Capture or upload Diwali celebration photos
- **AI Oracle Scoring**: Automated brightness and light detection (1-10 scale)
- **Smart Contract Rewards**: Multi-tier reward system (Base: 1x, Medium: 1.5x, High: 2x)
- **Community Voting**: Decentralized scoring with community participation
- **Real-time Gallery**: Live feed of submissions with voting and social features
- **Funding Pool**: Community-funded reward system with transparent balance tracking
- **Responsive Design**: Beautiful festive theme with gold, saffron, and purple colors

## Quick Start

### Prerequisites

- Node.js 18+
- npm or yarn
- MetaMask, Coinbase Wallet, or WalletConnect
- Base Network access

### Installation

1. **Clone the repository**
   ```bash
   git clone <your-repo-url>
   cd base-template-mini-app
   ```

2. **Install dependencies**
   ```bash
   npm install
   ```

3. **Set up environment variables**
   ```bash
   cp .env.example .env.local
   ```

   Fill in your environment variables:
   ```env
   # Blockchain Configuration
   NEXT_PUBLIC_CHAIN_ID='84532' # Base Sepolia testnet
   NEXT_PUBLIC_RPC_URL='https://sepolia.base.org'

   # Smart Contracts (deploy first)
   NEXT_PUBLIC_DIWALI_LIGHTS_CONTRACT_ADDRESS='0x...'
   NEXT_PUBLIC_REWARD_TOKEN_CONTRACT_ADDRESS='0x...'

   # AI Oracle (replace with Openputer when available)
   NEXT_PUBLIC_AI_ORACLE_URL='http://localhost:3001/api/ai-score'

   # IPFS (Pinata recommended)
   NEXT_PUBLIC_PINATA_API_KEY='your-key'
   NEXT_PUBLIC_PINATA_SECRET_KEY='your-secret'

   # Wallet Configuration
   NEXT_PUBLIC_USE_WALLET="true"
   ```

4. **Start development server**
   ```bash
   npm run dev
   ```

5. **Open [http://localhost:3000](http://localhost:3000)**

## Smart Contract Deployment

### Deploy to Base Testnet

1. **Set up Hardhat environment**
   ```bash
   npm install -g hardhat
   ```

2. **Configure network**
   ```javascript
   // hardhat.config.js
   networks: {
     base_sepolia: {
       url: "https://sepolia.base.org",
       accounts: [process.env.PRIVATE_KEY],
       chainId: 84532,
       gasPrice: 1000000000,
     }
   }
   ```

3. **Deploy contracts**
   ```bash
   # Compile contracts
   node scripts/compile-contract.js

   # Deploy to Base Sepolia
   npx hardhat run scripts/deploy-contracts.js --network base_sepolia

   # Test contracts
   npx hardhat run scripts/test-contracts.js --network base_sepolia
   ```

4. **Verify contracts (optional)**
   ```bash
   npx hardhat verify --network base_sepolia <contract-address>
   ```

### Contract Addresses

After deployment, update your `.env.local`:
```env
NEXT_PUBLIC_DIWALI_LIGHTS_CONTRACT_ADDRESS='0x...'
NEXT_PUBLIC_REWARD_TOKEN_CONTRACT_ADDRESS='0x...'
```

## Contract Functions

### DiwaliLights Contract

```solidity
// Submit a Diwali photo
function submitDiwaliLights(string imageUrl, string ipfsHash) payable

// Process AI scoring
function processAIScore(bytes32 requestId)

// Vote on submissions
function voteOnSubmission(string imageUrl, uint8 score)

// Calculate and distribute rewards
function calculateAndDistributeRewards(string imageUrl)

// Get submission details
function getSubmission(string imageUrl) view returns (Submission)

// Get user statistics
function getUserStats(address user) view returns (uint256, uint256, uint256)
```

### DiwaliToken Contract

```solidity
// Mint tokens (owner only)
function mint(address to, uint256 amount)

// Batch mint for rewards
function mintBatch(address[] recipients, uint256[] amounts)

// Check token balance
function balanceOf(address account) view returns (uint256)
```

## Frontend Components

### Core Components

- **ImageUpload**: Camera capture and file upload with Diwali styling
- **Gallery**: Real-time submission gallery with voting
- **FundingSection**: Reward pool funding and statistics
- **Home**: Landing page with features and CTA

### Key Features

- **Multi-step submission flow** with progress indicators
- **Real-time AI scoring** with loading states
- **Community voting system** with batch operations
- **Responsive design** optimized for mobile and desktop

## API Routes

### AI Scoring
```typescript
POST /api/ai-score
// Body: FormData with 'image' file
// Returns: { score, ipfsHash, imageUrl }
```

### Webhook (Optional)
```typescript
POST /api/webhook
// Handles Farcaster frame interactions
```

## User Flow

1. **Connect Wallet** → MetaMask/Coinbase/WalletConnect
2. **Submit Photo** → Upload or capture Diwali image
3. **AI Processing** → Automated scoring (1-10 scale)
4. **Community Voting** → Users vote on submissions
5. **Reward Distribution** → Smart contract auto-rewards based on final score
6. **Gallery Display** → View all submissions with scores and rewards

## Configuration

### Environment Variables

| Variable | Description | Required |
|----------|-------------|----------|
| `NEXT_PUBLIC_CHAIN_ID` | Base network chain ID | 
| `NEXT_PUBLIC_DIWALI_LIGHTS_CONTRACT_ADDRESS` | Deployed contract address | 
| `NEXT_PUBLIC_REWARD_TOKEN_CONTRACT_ADDRESS` | Token contract address | 
| `NEXT_PUBLIC_AI_ORACLE_URL` | AI scoring endpoint | 
| `NEXT_PUBLIC_PINATA_API_KEY` | IPFS upload key | 

### Contract Constants

```typescript
// Reward tiers
BASE_REWARD_AMOUNT: '1' // 1 DWL token
BONUS_MULTIPLIER: 2     // 2x for high scores
COOLDOWN_PERIOD: 86400000 // 24 hours in ms
VOTING_PERIOD: 604800000  // 7 days in ms
```

## Deployment

### Vercel (Recommended)

1. **Install Vercel CLI**
   ```bash
   npm i -g vercel
   ```

2. **Deploy**
   ```bash
   vercel --prod
   ```

3. **Set environment variables** in Vercel dashboard

### Manual Deployment

```bash
# Build for production
npm run build

# Start production server
npm start
```

## Security Considerations

- **Rate limiting**: One submission per 24 hours per wallet
- **Input validation**: Image size and format restrictions
- **Access controls**: Owner-only functions for contract management
- **Reentrancy protection**: Using OpenZeppelin guards
- **Pausable**: Emergency pause functionality

## Monitoring

### Contract Events

- `SubmissionCreated` - New photo submission
- `SubmissionScored` - AI scoring completed
- `VoteCast` - Community vote recorded
- `RewardDistributed` - Token reward sent

### Frontend Analytics

- Submission success rates
- User engagement metrics
- Contract interaction logs

## Development Scripts

```bash
# Development
npm run dev              # Start dev server
npm run build           # Build for production
npm run start           # Start production server

# Smart Contracts
node scripts/compile-contract.js    # Compile contracts
node scripts/deploy-contracts.js   # Deploy to Base
node scripts/test-contracts.js     # Run tests

# Deployment
npm run deploy:vercel   # Deploy to Vercel
```

## Customization

### Theme Colors
```css
/* globals.css */
:root {
  --primary: #0052ff;     /* Base blue */
  --accent: #f59e0b;      /* Gold */
  --amber: #f59e0b;       /* Diwali gold */
  --orange: #ea580c;      /* Saffron */
  --purple: #7c3aed;      /* Royal purple */
}
```

### Contract Parameters
```typescript
// lib/constants.ts
CONTRACT_CONSTANTS = {
  BASE_REWARD_AMOUNT: '1000000000000000000', // 1 DWL
  BONUS_MULTIPLIER: 2,
  COOLDOWN_PERIOD: 24 * 60 * 60 * 1000, // 24 hours
  VOTING_PERIOD: 7 * 24 * 60 * 60 * 1000, // 7 days
}
```

## Future Enhancements

- **Openputer AI Integration**: Replace mock AI with real ML model
- **Social Features**: Comments, likes, and user profiles
- **NFT Rewards**: Special edition Diwali NFTs for top submissions
- **Cross-chain Support**: Expand beyond Base Network
- **Mobile App**: React Native companion app

## Support

- **Discord**: [Join our community](https://discord.gg/basetivediwali)
- **Twitter**: [@basetivediwali](https://twitter.com/basetivediwali)
- **GitHub**: [Report issues](https://github.com/basetive/basetive-diwali/issues)

## License

MIT License - see [LICENSE](LICENSE) file for details.

---

**Built with for the Diwali community on Base Network** 
